[general]
accounts = Mozilla-gmail
ui = TTYUI
#ui = quiet
pythonfile = ~/.dotfiles/offlineimap.py
fsync = False

[mbnames]
enabled = yes
filename = ~/.mutt/muttmailboxes
peritem = "+%(foldername)s"
sep = " \\\n"
header = "mailboxes "
footer = "\n"
# Do not try to sort already sorted mailboxes!
sort_keyfunc = lambda d: None


[Repository Mozilla_Remote-gmail]
maxconnections = 4
type = Gmail
foldersort = mycmp
ssl = yes
sslcacertfile = /etc/ssl/certs/ca-certificates.crt
folderfilter = lambda foldername: foldername not in '[Gmail]/All Mail'
remoteusereval = "raliiev@mozilla.com"
remotepasseval = get_password("email/raliiev@mozilla.com")
nametrans: lambda s: {'[Gmail]/Starred'   : 'Starred',
                      '[Gmail]/Trash'     : 'Trash',
                      '[Gmail]/Spam'      : 'Spam',
                      '[Gmail]/Sent Mail' : 'Sent',
                      '[Gmail]/Important' : 'Important',
                      '[Gmail]/Drafts'    : 'Drafts',
                      '[Gmail]/All Mail'  : 'Archive',
                      }.get(s, s)


[Repository Mozilla_Local-gmail]
type = Maildir
localfolders = ~/.offlineimap-gmail
restoreatime = no
nametrans: lambda s: dict((value,key) for key,value in
                      {'[Gmail]/Starred'   : 'Starred',
                       '[Gmail]/Trash'     : 'Trash',
                       '[Gmail]/Spam'      : 'Spam',
                       '[Gmail]/Sent Mail' : 'Sent',
                       '[Gmail]/Important' : 'Important',
                       '[Gmail]/Drafts'    : 'Drafts',
                       '[Gmail]/All Mail'  : 'Archive',
                      }.iteritems()).get(s, s)

[Account Mozilla-gmail]
localrepository = Mozilla_Local-gmail
remoterepository = Mozilla_Remote-gmail
# status_backend = sqlite
# Number of quick-syncs between autorefreshes. Quick-syncs do not update if the
# only changes were to IMAP flags
quick = 10
postsynchook = notmuch new
