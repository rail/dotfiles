set mbox_type = Maildir
set folder = ~/.offlineimap-gmail
set implicit_autoview
set spoolfile = ~/.offlineimap-gmail/INBOX
set record=+Sent
set postponed=+Drafts
set header_cache="~/.mutt/Cache"
set trash=+Trash
set use_from
set from = "Rail Aliiev <rail@mozilla.com>"
set signature="~/.signature"
set sort=threads
set sort_aux=date-received
set auto_tag
set pager_index_lines=9
set fcc_clear
set delete=yes
set reply_self
set mime_forward=ask-yes
set send_charset="us-ascii:iso-8859-1:iso-8859-9:utf-8"
set allow_8bit
set autoedit
set beep_new=no
set editor="vim -c 'set tw=72 et spell ft=mail formatoptions=tcqw'"
set index_format="%Z %D [%-20.20n] %?M?(->%M)? %s %> %5c %2N"
set date_format="%H:%M, %a, %d %b"
set folder_format="%N %f"
set fast_reply
set quit=ask-yes
set xterm_set_titles
set mail_check=90
set mime_forward=yes
set duplicate_threads=yes
set pager_stop
set include=yes
set rfc2047_parameters
set text_flowed
set menu_scroll
set use_envelope_from
set charset="utf-8"
set pipe_decode=no
set help=no
set forward_format = "Fwd: %s"
set sidebar_visible=yes
set sidebar_width=35
set sidebar_divider_char="â”‚"

set mail_check_stats=yes
set sidebar_format="%B%*  %S%?N?(%N)?%?F?[%F]?"
set sidebar_indent_string=" "
set sidebar_folder_indent=yes
set sidebar_short_path=yes

color sidebar_indicator default color17
# Dark blue background
color sidebar_highlight white   color238
# Grey background
color sidebar_spoolfile yellow  default
# Yellow
color sidebar_new       green   default
# Green
color sidebar_flagged   red     default
# Red
color sidebar_divider   color8  default
# Dark grey

set query_command="abook --mutt-query %s"
set wrapmargin = 10
#set max_line_length = 100
set quote_regexp="^([ \t]*[^ \-=\t|>]*[|>])+"
set tmpdir="/tmp"
set spam_separator=""
set simple_search="~f %s | ~s %s | ~t %s"
set print_command="LANG=en_CA.UTF-8 muttprint"
#set to_chars = ' +>-<L'

unset move
unset wait_key
unset markers
unset write_bcc
unset bounce_delivered
unset confirmappend
unset mark_old

# Use the following script to dump color numbers: http://www.vim.org/scripts/script.php?script_id=1349
color body red default "review[?+\-]"

# release mail
color index red default "~s '[release] .* failed at'"
color index green default "~s '[release] .* ready for release'"
color index green default "~s 'All signed builds now available'"
color index green default "~s '.*aws_sanity_check'"

ignore *
unignore from: date subject to cc Reply-To:
hdr_order from subject to cc date x-spam: Reply-To:
alternates rail@.* raliiev@.*

source ~/.mutt/muttmailboxes
source ~/.mutt/mutt-colors-solarized-dark-256.muttrc
#source ~/.mutt/vombatidae.mutt
source ~/.mutt/lists

bind index P parent-message
bind pager P parent-message
bind generic <insert> tag-entry         # tag message in index
bind pager <insert> tag-message         # tag message in pager
bind index,pager <delete> delete-message
bind editor <Tab> complete-query
bind editor ^T complete
bind index \CP sidebar-prev
bind index \CN sidebar-next
bind index \CO sidebar-open
bind pager \CP sidebar-prev
bind pager \CN sidebar-next
bind pager \CO sidebar-open

macro index,pager      .i      "l((~N|~O|~F)!~D)|(~d<1w!~Q)\n" 'Show messages not so old (1 week)'
macro index,pager      .n      "l~N\n" 'Show new messages'
macro index,pager      .o      "l(~N|~O)\n" 'Show old messages'
macro index,pager      .a      "l~A\n" 'Show all messages'
macro index,pager      .t      "l~d<1d\n" 'Show messages from today'
macro index,pager      .y      "l~d<2d ~d>1d\n" 'Show messages up to 1 year old'
macro index,pager      .d      "l~d>2w" 'Show messages 2w+ old'
macro pager \e1 ":set pager_index_lines=3\n" 'Windowsize 1'
macro pager \e2 ":set pager_index_lines=6\n" 'Windowsize 2'
macro pager \e3 ":set pager_index_lines=9\n" 'Windowsize 3'
macro pager \e4 ":set pager_index_lines=12\n" 'Windowsize 4'
macro pager \e5 ":set pager_index_lines=15\n" 'Windowsize 5'
macro pager \e6 ":set pager_index_lines=18\n" 'Windowsize 6'
macro pager \e7 ":set pager_index_lines=21\n" 'Windowsize 7'
macro pager \e8 ":set pager_index_lines=24\n" 'Windowsize 8'
macro pager \e9 ":set pager_index_lines=27\n" 'Windowsize 9'
macro pager \e0 ":set pager_index_lines=0\n" 'Windowsize 0'
macro index,pager A "|abook --add-email\n" 'add sender to abook'
macro index \eb ":toggle sidebar_visible\n"
macro pager \eb ":toggle sidebar_visible\n"
macro index,pager     \ei "c+INBOX\n"
macro index,pager S "<save-message>+Spam<enter>" "mark message as spam"
macro index,pager a "<enter-command>unset trash\n <delete-message><enter-command>set trash=+Trash\n" "Gmail archive message"

folder-hook     INBOX       push '.i'
folder-hook     Cron        push '.a'
folder-hook     .           push '.n'
folder-hook . 'set index_format="%Z %D [%-20.20n] %?M?(->%M)? %s %> %5c %2N"'
folder-hook Bug 'set index_format="%2N %Z %D %?M?(->%M)? %s"'
folder-hook Releases 'set index_format="%Z %D %?M?(->%M)? %s"'
folder-hook . set sort=threads
folder-hook Sent set sort=date-sent
folder-hook . set pager_stop
folder-hook Cron set pager_stop=no
folder-hook Trash push 'T~N<enter>Wn'  # Mark all trashed messages as read

auto_view text/richtext
auto_view text/html
auto_view text/x-sgml
auto_view text/x-vcard
auto_view text/x-sh
auto_view text/x-csrc
auto_view text/enriched
auto_view message/partial
auto_view text/ms-rtf
auto_view text/rtf
auto_view application/x-gzip-dvi
auto_view application/x-gzip
auto_view application/x-gunzip
auto_view application/x-gtar
auto_view application/x-tar
auto_view application/x-tar-gz
auto_view application/x-rar-compressed
auto_view application/x-zip-compressed
auto_view application/zip
auto_view application/x-csh
auto_view application/x-sh
auto_view application/x-script
auto_view application/x-shellscript
auto_view application/x-latex
auto_view application/x-shar
auto_view application/x-troff-man
auto_view application/x-troff-me
auto_view application/x-pgp-message
auto_view application/pgp-encrypted
auto_view application/pgp-signature
auto_view application/pgp-keys
auto_view application/ms-tnef
auto_view application/pdf
auto_view application/octet-stream
auto_view application/x-tcl
auto_view application/x-perl
auto_view application/ms-word
auto_view application/msword
auto_view application/word
auto_view application/ms-rtf
auto_view application/rtf
auto_view application/x-www-form-urlencoded
auto_view application/octet-stream

alternative_order text/plain text/html text/enriched

spam "X-Spam-Status: Yes"                     "S"
spam "X-Bogosity: Spam, tests=bogofilter"     "B"

# decrypt bugzilla messages
message-hook '~s "\\(Secure bug .* updated\\)"' 'exec check-traditional-pgp'
message-hook '~s "SecureMail"' 'exec check-traditional-pgp'

# The 'S' (skip-quoted) command scrolls the pager past the quoted text (usually
# indented with '> '.  Setting 'skip_quoted_offset' leaves some lines of quoted
# text on screen for context.
# Show three quoted lines before the reply
set skip_quoted_offset = 3

color progress white red
